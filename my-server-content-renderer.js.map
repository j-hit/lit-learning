{"version":3,"file":"my-server-content-renderer.js","sourceRoot":"","sources":["src/my-server-content-renderer.ts"],"names":[],"mappings":"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","sourcesContent":["import {LitElement, TemplateResult, css} from 'lit';\nimport {html, unsafeStatic} from 'lit/static-html.js';\n\nimport {customElement} from 'lit/decorators.js';\n\nimport {spread} from '@open-wc/lit-helpers';\n\ntype ServerElement = {\n  element: string;\n  props: {\n    children?: string | ServerElement[];\n    [key: string]: string | boolean | ServerElement[] | undefined | unknown;\n  };\n};\n\n@customElement('my-server-content-renderer')\nexport class MyServerContentRenderer extends LitElement {\n  static override styles = [\n    css`\n      :host {\n        display: grid;\n        gap: 16px;\n      }\n    `,\n  ];\n\n  /**\n   * Image this content coming from an API response\n   *  */\n  private content: ServerElement[] = [\n    {\n      element: 'my-button',\n      props: {\n        size: 'small',\n        shape: 'rectangle',\n        variant: 'secondary',\n        '?shadow': true,\n        children: [\n          {\n            element: 'span',\n            props: {\n              children: 'Button 1',\n            },\n          },\n        ],\n      },\n    },\n    {\n      element: 'my-button',\n      props: {\n        size: 'small',\n        shape: 'rectangle',\n        variant: 'secondary',\n        '?shadow': false,\n        children: [\n          {\n            element: 'span',\n            props: {\n              children: 'Button 2',\n            },\n          },\n        ],\n      },\n    },\n    {\n      element: 'my-header',\n      props: {\n        heading: 'Digi, your personal assistant',\n        logo: '🐔',\n        buttons: [\n          {\n            size: 'small',\n            shape: 'rectangle',\n            variant: 'secondary',\n            shadow: true,\n            text: 'My header button 1',\n          },\n          {\n            size: 'small',\n            shape: 'rectangle',\n            variant: 'secondary',\n            shadow: false,\n            text: 'My header button 2',\n          },\n        ],\n      },\n    },\n  ];\n\n  private renderContent(content: ServerElement): TemplateResult {\n    const tag = content.element as keyof HTMLElementTagNameMap;\n    const props = content.props;\n    const children = props.children || [];\n    const propsWithoutChildren = {...content.props, children: undefined};\n\n    const propsWithFlatStructure = Object.entries(propsWithoutChildren).reduce(\n      (acc, [key, value]) => {\n        if (typeof value === 'object') {\n          acc[key] = JSON.stringify(value);\n        } else {\n          acc[key] = value as string | undefined;\n        }\n        return acc;\n      },\n      {} as Record<string, string | undefined>\n    );\n\n    return html`<${unsafeStatic(tag)} ${spread(propsWithFlatStructure)}>\n      ${\n        typeof children === 'string'\n          ? children\n          : children.map((child) => this.renderContent(child))\n      }\n    </${unsafeStatic(tag)}>`;\n  }\n\n  override render() {\n    return html`${this.content.map((item) => this.renderContent(item))}`;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'my-server-content-renderer': MyServerContentRenderer;\n  }\n}\n"]}